const breakValue = document.getElementById('break-length');
const sessionValue = document.getElementById('session-length');
const timeLeft = document.getElementById('time-left');
const startTimer = document.getElementById('start_stop');
const reset = document.getElementById('reset');
const breakInc = document.getElementById('break-increment');
const breakDec = document.getElementById('break-decrement');
const sesInc = document.getElementById('session-increment');
const sesDec =document.getElementById('session-decrement');

let defminutes = "1";
let defsecs = "00";
let defTimerState = ()=> {timeLeft.innerHTML = defminutes + ":" + defsecs;
}
defTimerState;
// let minutes = defminutes;
// let secs =defsecs;
// let defTimerState = ()=> {timeLeft.innerHTML = minutes + ":" + secs;
// }

function disableButtons(bool){
    breakInc.disabled = bool;
    breakDec.disabled = bool;
    sesInc.disabled = bool;
    sesDec.disabled = bool;
}

defTimerState();
let sessions =() => {
sesInc.onclick = function(){
    sessionValue.innerHTML++;
    if(sessionValue.innerHTML>60){
        sessionValue.innerHTML = 60;
        alert('You Reach The Limit!')
    }
}
sesDec.onclick = function(){
    sessionValue.innerHTML--;
    if(sessionValue.innerHTML < 0){
        sessionValue.innerHTML = 0;
    }
}
    return sessionValue.innerHTML;

};
sessions();

let breaks = () => {
breakInc.onclick = function(){
    breakValue.innerHTML++;
    if(breakValue.innerHTML>25){
        breakValue.innerHTML = 25;
        alert('You Reach The Limit!')
    }
}
breakDec.onclick = function(){
    breakValue.innerHTML--;
    if(breakValue.innerHTML < 0){
        breakValue.innerHTML = 0;
    }
}
    return breakValue.innerHTML;
};
breaks();


let interval;
let secsInterval;
let isStarted = false;

let secInterval = ()=>{
    if(defsecs == "00")   
    defsecs=59;
    defminutes--;
    secsInterval = setInterval(function(){
        defsecs--;
        timeLeft.innerHTML = defminutes + ":" +defsecs;
        if(defsecs <= 0){
            defsecs= 60;       
        }
    },1000);
}

let minsInterval =() =>{
    defminutes = sessions()-1;
    interval = setInterval(function(){
        defminutes--;
        if (defminutes <= '0' && defsecs <= "00") {   
            alert('thats it')             /// es sami xazi amovige interval - intervalidan
            defsecs 
            defminutes = breaks();
        }
        timeLeft.innerHTML = defminutes + ":" + defsecs;    
    },60000); 
}

startTimer.onclick = function (){
    disableButtons(true);
    if(isStarted==false) {
        secInterval();
        minsInterval();
     isStarted=true;      
    } 
};


reset.onclick = function(){
    breakValue.innerHTML = 5;
    sessionValue.innerHTML = 25;
    timeLeft.innerHTML = "25" + ":" +"00";
    clearInterval(secsInterval)
    clearInterval(interval);
    disableButtons(false);
    isStarted=false;
};